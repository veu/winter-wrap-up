m.setAttribute('content',`width=device-width,initial-scale=${s=1/window.devicePixelRatio},maximum-scale=${s},user-scalable=no`);onclick=e=>{$[0]&&([B,C,D,F,...V]=$.pop())},ontouchstart=e=>{T=e.changedTouches.item(0)},ontouchend=e=>{e=e.changedTouches.item(0),s=e.pageX-T.pageX,t=e.pageY-T.pageY,s|t?W&&U(s*s>t*t?(s>0)*2:(t>0)*2+1):W?onclick():A.play(W=1)},ontouchmove=e=>{e.preventDefault()},V=H=[],$=[];for(i=11e3;i--;)H+=String.fromCharCode(sin(i/3501)*random()*6+128);A=new Audio('data:audio/wav;base64,UklGRh0rAABXQVZFZm10IBAAAAABAAEARKwAAESsAAABAAgAZGF0YfkqAACA'+btoa(H));for(i=64;i--;)B=C=P=G=R=V[i]=D=W=0,F=1;for(i=10;i--;)V[k=random()*64|64]?i++:V[k]=3;for(i=40;i--;)V[k=random()*6+1<<3|random()*6+1]&4?i++:V[k]++;X=(e,f,s,t)=>{beginPath(),fillStyle='#'+'694e57fbd742fffeeedddccc'.substr(s*3,3),arc(e+16,f+16,t,0,7),fill()},I=(e,f,s,t)=>{X(B*32-F*f-(e+G*R)*D,C*32+D*f-(e+G*R)*F,k*3||s,t/2+k/4)},onkeydown=e=>{U(e.which-37)},U=e=>{K&&($.push([B,C,D,F,...V]),e>>2||(k=(D=--e%2)+(s=B+D),f=(F=--e%2)+(t=C+F),s|t)>>3||(P=0,Q=s<<3|t,(k|f)>>3||(P=min(4-V[S=k<<3|f],V[Q]))&&A.play(V[Q]-=P,V[S]+=P),R=32,(G=!V[Q])&&(B=s,C=t)),G||P||$.pop())};setInterval(e=>{s=c.width=c.height=min(innerWidth,innerHeight*.85),X(R=R&&R-2,K=0,0,s*2),scale(s/=256,s);for(i=64;i--;)K|=V[i]&&!V[i|64];for(i=64;i--;)X(i/8<<5,i%8*32,K&&V[i|64],i%3+14);for(k=4;k--;)for(i=64;i--;)V[i]>k&&(e=i/8<<5,f=i%8*32,R>k<<3||K?X(e-(k<P&&i==S)*D*R,k*2+f+2-V[i]*2-(k<P&&i==S)*F*R,k+4,k*2+6):X(e,f+i%7,3-k,k*2+i%2+1));for(k=2;k--;)I(R?9:8,0,1,5),I(-7,0,2,12);for(k=2;k--;)for(i=8;i--;)I(4-i,0,2,9);for(k=2;k--;)for(i=4;i--;)I(i%2/2-12,i%2*3+3-i*3,i%2+3,1+i%2/2),I(3-i*3,2-i%2*3,1,i*2+5)},20)