V=I=[];for(i=11e3;i--;)I+=String.fromCharCode(sin(i/3501)*random()*6+128);for(i=64;i--;)B=C=Q=H=S=V[i]=F=0,G=1;for(i=10;i--;)V[k=random()*64|64]?i++:V[k]=3;for(i=40;i--;)V[k=random()*6+1<<3|random()*6+1]&4?i++:V[k]++;a=(e,f,s,t)=>{beginPath(),fillStyle='#'+'694e57fbd742fffeeedddccc'.substr(s*3,3),arc(e+16,f+16,t,0,7),fill()},K=(e,f,s,t)=>{a(B*32-G*f-(e+H*S)*F,C*32+F*f-(e+H*S)*G,k*3||s,t/2+k/4)},onkeydown=(e,f,s,t)=>{P&&(k=e.which-37,k>>2?Q&&(H&&(B-=F,C-=G),V[R]+=Q,V[U]-=Q,Q=0):(e=(F=--k%2)+(s=B+F),f=(G=--k%2)+(t=C+G),s|t)>>3||(Q=0,i=R=s<<3|t,(e|f)>>3||(Q=min(4-V[U=e<<3|f],V[i]),V[i]-=Q,V[U]+=Q,Q&&new Audio('data:audio/wav;base64,UklGRh0rAABXQVZFZm10IBAAAAABAAEARKwAAESsAAABAAgAZGF0YfkqAACA'+btoa(I)).play()),S=32,(H=!V[i])&&(B=s,C=t)))},setInterval(s=(e,f,s,t)=>{a(S=S&&S-2,P=0,0,(s=c.height=c.width=innerHeight-5)*2),scale(s/=256,s);for(i=64;i--;)P|=V[i]&&!V[i|64];for(i=64;i--;)a(e=i/8<<5,f=i%8*32,P&&V[i|64],i%3+14);for(k=4;k--;)for(i=64;i--;)V[i]>k&&(e=i/8<<5,f=i%8*32,S>k<<3||P?a(e-(s=k<Q&&i==U)*F*S,k*2+f-s*G*S+2-V[i]*2,k+4,k*2+6):a(e,f+i%7,3-k,k*2+i%2+1));for(k=2;k--;)K(S?9:8,0,1,5),K(-7,0,2,12);for(k=2;k--;)for(i=8;i--;)K(4-i,0,2,9);for(k=2;k--;)for(i=4;i--;)K(i%2/2-12,i%2*3+3-i*3,i%2+3,1+i%2/2),K(3-i*3,2-i%2*3,1,i*2+5)},20)